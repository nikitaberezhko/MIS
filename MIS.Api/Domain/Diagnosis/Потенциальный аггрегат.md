# Потенциальный агрегат Diagnosis

## Проблема проектирования

Агрегат `Disease` не может содержать `PatientId` из-за противоречия бизнес-логике и концепциям DDD, что является ключевым моментом. Это означает, что `Disease` воспринимается как нечто самостоятельное, возможно, как часть каталога заболеваний или сущность с собственным жизненным циклом, который не зависит напрямую от конкретного пациента. 

В таком случае, прямое хранение идентификатора пациента (`PatientId`) внутри агрегата `Disease` действительно нарушало бы его автономию и инварианты, определенные предметной областью.

## Решение

Если `Disease` не может ссылаться на `Patient`, то для организации связи "один ко многим" (Пациент имеет много Заболеваний) необходимо ввести новый агрегат.

## Назначение агрегата Diagnosis

Основное назначение агрегата `Diagnosis` — явно смоделировать факт того, что конкретный пациент был диагностирован с определенным заболеванием.

### Структура агрегата

#### Идентификаторы других агрегатов
Внутри агрегата `Diagnosis` будут храниться глобальные идентификаторы других агрегатов, на которые он ссылается:

- `PatientId` (ссылка на корень агрегата `Patient`)
- `DiseaseId` (ссылка на корень агрегата `Disease`)

#### Специфичные данные диагноза
Помимо идентификаторов, агрегат `Diagnosis` будет содержать все данные, относящиеся именно к этому конкретному диагнозу пациента, а не к самому пациенту или заболеванию. Например:

- `DiagnosisDate` (дата постановки диагноза)
- `TreatmentStartDate` (дата начала лечения)
- Любые другие атрибуты, характеризующие именно эту запись о заболевании пациента